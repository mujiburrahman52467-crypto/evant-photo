<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Event Photo Generator</title>
<style>
  body {
    font-family: 'Sutonny MJ', sans-serif;
    text-align: center;
    padding: 10px;
    background-color: #f0f0f0;
  }
  canvas {
    max-width: 100%;
    height: auto;
    border: 1px solid #ccc;
  }
  input, button {
    margin: 8px;
    padding: 6px;
    font-size: 14px;
    width: 80%;
    max-width: 300px;
  }
  #download {
    display: block;
    margin-top: 10px;
  }
</style>
</head>
<body>

<h2>আমি আসছি, আপনি আসছেন তো?</h2>

<input type="text" id="username" placeholder="আপনার নাম লিখুন" />
<input type="file" id="userimage" accept="image/*" />
<br>
<button id="generate">Generate Image</button>
<canvas id="canvas" width="1080" height="1080"></canvas>
<a id="download" href="#" download="event-photo.png">Download Image</a>

<script>
// Load background image
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const bg = new Image();
bg.src = 'background.png.png'; 

bg.onload = () => {
  drawInitial();
};

function drawInitial() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.drawImage(bg, 0, 0, canvas.width, canvas.height);
}

// Load Sutonny MJ font
const font = new FontFace('Sutonny MJ', 'url(https://cdn.jsdelivr.net/gh/rikimaru2020/SutonnyMJ/SutonnyMJ-Regular.ttf)');
font.load().then(function(loadedFont) {
  document.fonts.add(loadedFont);
});

document.getElementById('generate').addEventListener('click', () => {
  const username = document.getElementById('username').value.trim();
  const file = document.getElementById('userimage').files[0];

  if(!username || !file){
    alert('নাম এবং ছবি দুটোই দিতে হবে');
    return;
  }

  const reader = new FileReader();
  reader.onload = function(e){
    const img = new Image();
    img.src = e.target.result;
    img.onload = function(){
      drawInitial();

      // Calculate scaling for responsiveness
      const scale = canvas.width / 1080; // base design 1080x1080

      // Draw user image in circle
      const imgX = 415 * scale;
      const imgY = 415 * scale;
      const diameter = 245 * scale;
      ctx.save();
      ctx.beginPath();
      ctx.arc(imgX + diameter/2, imgY + diameter/2, diameter/2, 0, Math.PI * 2, true);
      ctx.closePath();
      ctx.clip();
      ctx.drawImage(img, imgX, imgY, diameter, diameter);
      ctx.restore();

      // Draw name
      ctx.fillStyle = '#EA332F';
      ctx.font = ${15*scale}px "Sutonny MJ";
      ctx.textAlign = 'center';
      ctx.fillText(username, 565*scale, 692*scale);
    };
  };
  reader.readAsDataURL(file);
});

// Download image
document.getElementById('download').addEventListener('click', () => {
  const link = document.getElementById('download');
  link.href = canvas.toDataURL('image/png');
});
</script>

</body>
</html
